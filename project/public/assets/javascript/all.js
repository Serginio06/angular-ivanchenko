function articleCtrl($scope,$routeParams){$scope.articleId=$routeParams.id}function BodyCtrl($scope,$anchorScroll,$location,$timeout,$document,MainService,$interval,path){$scope.basePath=path.basePath,$scope.menuOnLoad=function(){document.getElementById("firstMenuItem").focus()},$scope.menuIconClick=function(){var x=document.getElementById("header__menu");"header__menu"===x.className?x.className+=" responsive":x.className="header__menu"};$timeout(function(){$location.path(""),$location.hash(""),$location.search(""),$anchorScroll()}),$scope.goTo=function(id){$location.path("");var targetElement=angular.element(document.getElementById(id));targetElement.length>0?$document.scrollToElement(targetElement,40,2e3):$timeout(function(){(targetElement=angular.element(document.getElementById(id))).length>0?$document.scrollToElement(targetElement,40,2e3):(targetElement=angular.element(document.getElementById("top")),$document.scrollToElement(targetElement,40,2e3))},200)},$scope.serviceMenuItems=["web","graphic","programming","photography"],$scope.serviceMenuItemsSelected=$scope.serviceMenuItems[0],$scope.serviceActiveItem={item1:"service--hr--1",item2:"",item3:"",item4:""},$scope.serviceItemClick=function(id){for(var key in $scope.serviceActiveItem)$scope.serviceActiveItem[key]="";key="item"+id,$scope.serviceActiveItem[key]="service--hr--1",$scope.serviceMenuItemsSelected=$scope.serviceMenuItems[id-1]},$scope.portfolioStates={},$scope.portfolioStates.activeItem="item1",$scope.portfolioStates.portfoliofilter="",$scope.portfolioMenuItems=[{id:"item1",title:"all",filter:""},{id:"item2",title:"web",filter:"web"},{id:"item3",title:"photography",filter:"photography"},{id:"item4",title:"graphic design",filter:"graphic"}],$scope.portfolioImg=MainService.getImages(),$scope.portfolioBtnClick=function(item){$scope.portfolioStates.activeItem=item.id,$scope.portfolioStates.portfoliofilter=item.filter},$scope.portfolioHidePopup=function(item,event){$scope.portfolio__img__class=""},$scope.portfolioShowPopup=function(item,event){var selector="#img-"+item.id,target=angular.element(document.querySelector(selector)),top=target[0].getBoundingClientRect().top,left=target[0].getBoundingClientRect().left,right=target[0].getBoundingClientRect().right,middleTop=top+(target[0].getBoundingClientRect().bottom-top)/2-10,middleSide=left+(right-left)/2-50;target.text(item),$scope.portfolio__img__category=item.category,$scope.portfolio__img__class="mouseOver",$scope.myStyle={top:middleTop+"px",left:middleSide+"px"}},$scope.achievementsItems=MainService.getAchievements(),$scope.lineInView=function(inview){$scope.acievementValue=[0,0,0,0],inview?$scope.myInteval=$interval(function(){$scope.acievementValue[0]<$scope.achievementsItems[0].value?$scope.acievementValue[0]+=6:$scope.acievementValue[0]>=$scope.achievementsItems[0].value&&($scope.acievementValue[0]=$scope.achievementsItems[0].value),$scope.acievementValue[1]<$scope.achievementsItems[1].value?$scope.acievementValue[1]+=12167:$scope.acievementValue[1]>=$scope.achievementsItems[1].value&&($scope.acievementValue[1]=$scope.achievementsItems[1].value),$scope.acievementValue[2]<$scope.achievementsItems[2].value?$scope.acievementValue[2]+=7:$scope.acievementValue[2]>=$scope.achievementsItems[2].value&&($scope.acievementValue[2]=$scope.achievementsItems[2].value),$scope.acievementValue[3]<$scope.achievementsItems[3].value?$scope.acievementValue[3]+=2:$scope.acievementValue[3]>=$scope.achievementsItems[3].value&&($scope.acievementValue[3]=$scope.achievementsItems[3].value),$scope.acievementValue[2]==$scope.achievementsItems[2].value&&$interval.cancel($scope.myInteval)},2):($interval.cancel($scope.myInteval),$scope.acievementValue=[0,0,0,0])},$scope.blockHeaderItems=MainService.getHeaderItems(),$scope.teamMembers=MainService.getTeamMembers(),$scope.socialIcons=MainService.getSocialIcons(),MainService.getNews().then(function(result){$scope.news=result},function(err){console.log("Error: ",err)}),$scope.nameRegEx=/(.*[a-z]){3,}/i,$scope.emailRegEx=/^[a-zA-Z0-9._]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,$scope.messageRegEx=/(.*[a-z0-9._]){20,}/i,$scope.contactNameInputValidClass="slideup",$scope.contactEmailInputValidClass="slideup",$scope.contactMessageInputValidClass="slideup",$scope.contacts={userName:"",userEmail:"",userMessage:""},$scope.nameValidation=function(isNameValide){$scope.contactNameInputValidClass=isNameValide?"slidedown":"slideup"},$scope.emailValidation=function(isEmailValide){$scope.contactEmailInputValidClass=isEmailValide?"slidedown":"slideup"},$scope.messageValidation=function(isMessageValide){$scope.contactMessageInputValidClass=isMessageValide?"slidedown":"slideup"},$scope.submitContactForm=function(isValid){}}function achievements(path){return{templateUrl:path.basePath+"assets/templates/achievements.html"}}function blockHeader(path){return{restrict:"E",templateUrl:path.basePath+"assets/templates/block-header.html",scope:{content:"=",h2Color:"@"},replace:!0}}function teamMembers(path){return{restrict:"E",templateUrl:path.basePath+"assets/templates/team-members.html"}}function newsBlock(path){return{templateUrl:path.basePath+"assets/templates/news-block.html"}}function contactForm(path){return{templateUrl:path.basePath+"assets/templates/contact-form.html"}}function headerBlock(path){return{templateUrl:path.basePath+"assets/templates/header-block.html"}}function MainService($http,$location,path){var service=this,socialIcons=[{name:"facebook",src:path.basePath+"assets/images/icons/facebook.png"},{name:"google",src:path.basePath+"assets/images/icons/google.png"},{name:"tweeter",src:path.basePath+"assets/images/icons/tweeter.png"},{name:"dribble",src:path.basePath+"assets/images/icons/dribble.png"}],teamMembers=[{id:1,name:"John Doe",position:"Graphic designer",description:"Tincidunt. Cras dapibus. Aenean leo ligula",src:path.basePath+"assets/images/mobile/member1.jpeg"},{id:2,name:"Sarah L. Hitz",position:"Frontend developer",description:"Montes, nascetur ridiculus mus. pellentesque eu",src:path.basePath+"assets/images/mobile/member2.jpeg"},{id:3,name:"Dale P. Pitchford",position:"Frontend developer",description:"Nullam dictum felis eu pede mollis pretium.",src:path.basePath+"assets/images/mobile/member3.jpeg"},{id:4,name:"Provicia Norton",position:"Backend developer",description:"Libero venenatis faucibus. Etiam sit amet eros faucibus",src:path.basePath+"assets/images/mobile/member4.jpeg"}],achievements=[{id:1,src:path.basePath+"assets/images/icons/achievement11.png",value:3054,name:"completed products"},{id:2,src:path.basePath+"assets/images/icons/achievement21.png",value:7234873,name:"click pressed"},{id:3,src:path.basePath+"assets/images/icons/achievement31.png",value:4670,name:"mails sent & received"},{id:4,src:path.basePath+"assets/images/icons/achievement41.png",value:939,name:"jokes tolds"}],portfolioImages=[{id:"1",category:"web design",src:path.basePath+"assets/images/mobile/portfolio_img/1.jpeg"},{id:"2",category:"web design",src:path.basePath+"assets/images/mobile/portfolio_img/2.jpeg"},{id:"3",category:"web design",src:path.basePath+"assets/images/mobile/portfolio_img/3.jpeg"},{id:"4",category:"web design",src:path.basePath+"assets/images/mobile/portfolio_img/4.jpeg"},{id:"5",category:"photography",src:path.basePath+"assets/images/mobile/portfolio_img/5.jpeg"},{id:"6",category:"photography",src:path.basePath+"assets/images/mobile/portfolio_img/6.jpeg"},{id:"7",category:"photography",src:path.basePath+"assets/images/mobile/portfolio_img/7.jpeg"},{id:"8",category:"photography",src:path.basePath+"assets/images/mobile/portfolio_img/8.jpeg"},{id:"9",category:"graphic",src:path.basePath+"assets/images/mobile/portfolio_img/9.jpeg"},{id:"10",category:"graphic",src:path.basePath+"assets/images/mobile/portfolio_img/10.jpeg"},{id:"11",category:"graphic",src:path.basePath+"assets/images/mobile/portfolio_img/11.jpeg"},{id:"12",category:"graphic",src:path.basePath+"assets/images/mobile/portfolio_img/12.jpeg"}],blockHeaderItems=[{header:"Our Portfolio",description:"id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget erosfaucibus"},{header:"We are the one",description:"Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget erosfaucibus"},{header:"Check out news",description:"Donec vitae sapien ut libero venenatis faucibus. Maecenas nec odio et ante tincidunt tempus.  Nullam quis ante. Etiam sit amet orci eget erosfaucibus"},{header:"Contact Us",description:"libero venenatis faucibus donec vitae sapien. Maecenas nec odio et ante tincidunt tempus.  Nullam quis ante. Etiam sit amet orci eget erosfaucibus"}];service.getImages=function(){return portfolioImages},service.getAchievements=function(){return achievements},service.getTeamMembers=function(){return teamMembers},service.getHeaderItems=function(){return blockHeaderItems},service.getSocialIcons=function(){return socialIcons},service.getNews=function(){var url=path.basePath+"assets/data/data.json",config={headers:{"content-type":"application/json"},transformResponse:function(defaults,transform){return(defaults=angular.isArray(defaults)?defaults:[defaults]).concat(transform)}($http.defaults.transformResponse,function(value){return changeDate(value)})},changeDate=function(value){for(var i=0;i<value.length;i++)value[i].newDate=new Date(value[i].date);return value};return $http.get(url,config).then(function(result){return result.data},function(err){console.log("ERROR on http:",err)})}}!function(){"use strict";angular.module("myModule",["duScroll","ngAnimate","angular-inview","ngRoute"]).constant("path",{basePath:"/angular-ivanchenko/project/public/"}).controller("BodyCtrl",BodyCtrl).controller("articleCtrl",articleCtrl).service("MainService",MainService).directive("achievements",achievements).directive("blockHeader",blockHeader).directive("teamMembers",teamMembers).directive("newsBlock",newsBlock).directive("contactForm",contactForm).directive("headerBlock",headerBlock).config(function($routeProvider,path){$routeProvider.when("/",{templateUrl:path.basePath+"assets/templates/main-content.html"}).when("/news",{template:"<news-block></news-block>"}).when("/article/:id",{templateUrl:path.basePath+"assets/templates/news-article.html",controller:"articleCtrl"}).otherwise({redirectTo:"/"})})}(),articleCtrl.$inject=["$scope","$routeParams"],BodyCtrl.$inject=["$scope","$anchorScroll","$location","$timeout","$document","MainService","$interval","path"],MainService.$inject=["$http","$location","path"];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzLmpzIiwiZGlyZWN0aXZlcy5qcyIsInNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgYW5ndWxhci5tb2R1bGUgKCdteU1vZHVsZScsIFsnZHVTY3JvbGwnLCAnbmdBbmltYXRlJywgJ2FuZ3VsYXItaW52aWV3JywgJ25nUm91dGUnXSlcbiAgICAgICAgICAgICAgIC8vYmFzZVBhdGggZm9yIGRlcGxveW1lbnRcbiAgICAgICAgICAgICAgIC5jb25zdGFudCgncGF0aCcsIHtiYXNlUGF0aDogJy9hbmd1bGFyLWl2YW5jaGVua28vcHJvamVjdC9wdWJsaWMvJ30pXG5cbiAgICAgICAgICAgICAgIC8vYmFzZVBhdGggZm9yIGxvY2FsIGxhdW5jaFxuICAgICAgICAgICAgICAgLy8gLmNvbnN0YW50ICgncGF0aCcsIHtiYXNlUGF0aDogJy9wcm9qZWN0L3B1YmxpYy8nfSlcbiAgICAgICAgICAgICAgIC5jb250cm9sbGVyICgnQm9keUN0cmwnLCBCb2R5Q3RybClcbiAgICAgICAgICAgICAgIC5jb250cm9sbGVyICgnYXJ0aWNsZUN0cmwnLCBhcnRpY2xlQ3RybClcbiAgICAgICAgICAgICAgIC5zZXJ2aWNlICgnTWFpblNlcnZpY2UnLCBNYWluU2VydmljZSlcbiAgICAgICAgICAgICAgIC5kaXJlY3RpdmUgKCdhY2hpZXZlbWVudHMnLCBhY2hpZXZlbWVudHMpXG4gICAgICAgICAgICAgICAuZGlyZWN0aXZlICgnYmxvY2tIZWFkZXInLCBibG9ja0hlYWRlcilcbiAgICAgICAgICAgICAgIC5kaXJlY3RpdmUgKCd0ZWFtTWVtYmVycycsIHRlYW1NZW1iZXJzKVxuICAgICAgICAgICAgICAgLmRpcmVjdGl2ZSAoJ25ld3NCbG9jaycsIG5ld3NCbG9jaylcbiAgICAgICAgICAgICAgIC5kaXJlY3RpdmUgKCdjb250YWN0Rm9ybScsIGNvbnRhY3RGb3JtKVxuICAgICAgICAgICAgICAgLmRpcmVjdGl2ZSAoJ2hlYWRlckJsb2NrJywgaGVhZGVyQmxvY2spXG4gICAgICAgICAgICAgICAuY29uZmlnIChhcHBDb25maWcpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBST1VURVIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgZnVuY3Rpb24gYXBwQ29uZmlnKCRyb3V0ZVByb3ZpZGVyLCBwYXRoKSB7XG5cbiAgICAgICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAgICAgLndoZW4gKCcvJywge1xuICAgICAgICAgICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJy4uL2Fzc2V0cy90ZW1wbGF0ZXMvbWFpbi1jb250ZW50Lmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogcGF0aC5iYXNlUGF0aCArICdhc3NldHMvdGVtcGxhdGVzL21haW4tY29udGVudC5odG1sJyxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC53aGVuICgnL25ld3MnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPG5ld3MtYmxvY2s+PC9uZXdzLWJsb2NrPidcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC53aGVuICgnL2FydGljbGUvOmlkJywge1xuICAgICAgICAgICAgICAgICAgICAvLyB0ZW1wbGF0ZTonPHA+YXJ0aWNsZSBpZD17e215SWR9fSBtc2c9e3ttc2d9fSBzaG91bGQgYmUgaGVyZTwvcD4nLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogcGF0aC5iYXNlUGF0aCArICdhc3NldHMvdGVtcGxhdGVzL25ld3MtYXJ0aWNsZS5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2FydGljbGVDdHJsJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm90aGVyd2lzZSAoe1xuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IERJUkVDVElWRVMgKFwiLi9kaXJlY3RpdmVzLmpzXCIpID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ09OVFJPTExFUlMoXCIuL2NvbnRyb2xsZXJzLmpzXCIpID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbi8vID09PT09PT09PT09PT09PT09PSBTRVJWSUNFUyAoXCIuL3NlcnZpY2VzLmpzXCIpID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gICAgfVxuKSAoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgc2VyZ2lpaXZhbmNoZW5rbyBvbiAxOS8wOS8yMDE3LlxuICovXG5cbmFydGljbGVDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckcm91dGVQYXJhbXMnXTtcbmZ1bmN0aW9uIGFydGljbGVDdHJsKCRzY29wZSwgJHJvdXRlUGFyYW1zKSB7XG4gICAgJHNjb3BlLmFydGljbGVJZCA9ICRyb3V0ZVBhcmFtcy5pZDtcbn1cblxuXG5Cb2R5Q3RybC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGFuY2hvclNjcm9sbCcsICckbG9jYXRpb24nLCAnJHRpbWVvdXQnLCAnJGRvY3VtZW50JywgJ01haW5TZXJ2aWNlJywgJyRpbnRlcnZhbCcsICdwYXRoJ107XG5mdW5jdGlvbiBCb2R5Q3RybCgkc2NvcGUsICRhbmNob3JTY3JvbGwsICRsb2NhdGlvbiwgJHRpbWVvdXQsICRkb2N1bWVudCwgTWFpblNlcnZpY2UsICRpbnRlcnZhbCwgcGF0aCkge1xuXG4gICAgJHNjb3BlLmJhc2VQYXRoID0gcGF0aC5iYXNlUGF0aDtcblxuICAgIC8vID09PT09PT09PT09PT09PW1lbnUgY2xpY2sgZnVuY3Rpb25zID09PT09PT09PT09PT09PVxuICAgICRzY29wZS5tZW51T25Mb2FkID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICgnZmlyc3RNZW51SXRlbScpLmZvY3VzICgpO1xuICAgIH07XG5cbiAgICAkc2NvcGUubWVudUljb25DbGljayA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIChcImhlYWRlcl9fbWVudVwiKTtcbiAgICAgICAgaWYgKHguY2xhc3NOYW1lID09PSBcImhlYWRlcl9fbWVudVwiKSB7XG4gICAgICAgICAgICB4LmNsYXNzTmFtZSArPSBcIiByZXNwb25zaXZlXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4LmNsYXNzTmFtZSA9IFwiaGVhZGVyX19tZW51XCI7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvLz09PT09PT09PT09PT09PSBBbmNob3Igc21vb3RoIHNjcm9sbCA9PT09PT09PT09PT09PT09PT09PT1cblxuICAgIHZhciB0b3AgPSAwO1xuICAgIHZhciBkdXJhdGlvbiA9IDIwMDA7IC8vbWlsbGlzZWNvbmRzXG5cbiAgICAkdGltZW91dCAoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vICRsb2NhdGlvbi51cmwoJy8nKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGggKFwiXCIpO1xuICAgICAgICAkbG9jYXRpb24uaGFzaCAoXCJcIik7XG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2ggKFwiXCIpO1xuICAgICAgICAkYW5jaG9yU2Nyb2xsICgpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmdvVG8gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2V2ZW50LnBhcmVudEVsZW1lbnQ9ICcsIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50KTtcblxuICAgICAgICAkbG9jYXRpb24ucGF0aCAoXCJcIik7XG5cbiAgICAgICAgdmFyIG9mZnNldCA9IDQwO1xuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgKGlkKSk7XG5cblxuICAgICAgICBpZiAodGFyZ2V0RWxlbWVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkZG9jdW1lbnQuc2Nyb2xsVG9FbGVtZW50ICh0YXJnZXRFbGVtZW50LCBvZmZzZXQsIGR1cmF0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgJHRpbWVvdXQgKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkIChpZCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQuc2Nyb2xsVG9FbGVtZW50ICh0YXJnZXRFbGVtZW50LCBvZmZzZXQsIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAoJ3RvcCcpKTtcbiAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LnNjcm9sbFRvRWxlbWVudCAodGFyZ2V0RWxlbWVudCwgb2Zmc2V0LCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LDIwMCk7XG5cblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gJHNjb3BlLm1lbnVJY29uQ2xpY2soKTtcblxuXG4gICAgfTtcblxuXG4gICAgLy89PT09PT09PT09PT09PT0gU2VydmljZSBzd2l0Y2hlciA9PT09PT09PT09PT09PT09PT09PT1cblxuICAgICRzY29wZS5zZXJ2aWNlTWVudUl0ZW1zID0gWyd3ZWInLCAnZ3JhcGhpYycsICdwcm9ncmFtbWluZycsICdwaG90b2dyYXBoeSddO1xuXG4gICAgJHNjb3BlLnNlcnZpY2VNZW51SXRlbXNTZWxlY3RlZCA9ICRzY29wZS5zZXJ2aWNlTWVudUl0ZW1zWzBdO1xuICAgICRzY29wZS5zZXJ2aWNlQWN0aXZlSXRlbSA9IHtcbiAgICAgICAgaXRlbTE6ICdzZXJ2aWNlLS1oci0tMScsXG4gICAgICAgIGl0ZW0yOiAnJyxcbiAgICAgICAgaXRlbTM6ICcnLFxuICAgICAgICBpdGVtNDogJydcbiAgICB9O1xuXG4gICAgJHNjb3BlLnNlcnZpY2VJdGVtQ2xpY2sgPSBmdW5jdGlvbiAoaWQpIHtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gJHNjb3BlLnNlcnZpY2VBY3RpdmVJdGVtKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VydmljZUFjdGl2ZUl0ZW1ba2V5XSA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAga2V5ID0gJ2l0ZW0nICsgaWQ7XG4gICAgICAgICRzY29wZS5zZXJ2aWNlQWN0aXZlSXRlbVtrZXldID0gJ3NlcnZpY2UtLWhyLS0xJztcbiAgICAgICAgJHNjb3BlLnNlcnZpY2VNZW51SXRlbXNTZWxlY3RlZCA9ICRzY29wZS5zZXJ2aWNlTWVudUl0ZW1zW2lkIC0gMV07XG4gICAgfTtcblxuICAgIC8vPT09PT09PT09PT09PT09IHBvcnRmb2xpbyA9PT09PT09PT09PT09PT09PT09PT1cbiAgICAkc2NvcGUucG9ydGZvbGlvU3RhdGVzID0ge307XG4gICAgJHNjb3BlLnBvcnRmb2xpb1N0YXRlcy5hY3RpdmVJdGVtID0gJ2l0ZW0xJztcbiAgICAkc2NvcGUucG9ydGZvbGlvU3RhdGVzLnBvcnRmb2xpb2ZpbHRlciA9ICcnO1xuICAgICRzY29wZS5wb3J0Zm9saW9NZW51SXRlbXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnaXRlbTEnLFxuICAgICAgICAgICAgdGl0bGU6ICdhbGwnLFxuICAgICAgICAgICAgZmlsdGVyOiAnJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2l0ZW0yJyxcbiAgICAgICAgICAgIHRpdGxlOiAnd2ViJyxcbiAgICAgICAgICAgIGZpbHRlcjogJ3dlYidcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdpdGVtMycsXG4gICAgICAgICAgICB0aXRsZTogJ3Bob3RvZ3JhcGh5JyxcbiAgICAgICAgICAgIGZpbHRlcjogJ3Bob3RvZ3JhcGh5J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2l0ZW00JyxcbiAgICAgICAgICAgIHRpdGxlOiAnZ3JhcGhpYyBkZXNpZ24nLFxuICAgICAgICAgICAgZmlsdGVyOiAnZ3JhcGhpYydcbiAgICAgICAgfSxcbiAgICBdO1xuXG5cbiAgICAkc2NvcGUucG9ydGZvbGlvSW1nID0gTWFpblNlcnZpY2UuZ2V0SW1hZ2VzICgpO1xuXG4gICAgJHNjb3BlLnBvcnRmb2xpb0J0bkNsaWNrID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgJHNjb3BlLnBvcnRmb2xpb1N0YXRlcy5hY3RpdmVJdGVtID0gaXRlbS5pZDtcbiAgICAgICAgJHNjb3BlLnBvcnRmb2xpb1N0YXRlcy5wb3J0Zm9saW9maWx0ZXIgPSBpdGVtLmZpbHRlcjtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnBvcnRmb2xpb0hpZGVQb3B1cCA9IGZ1bmN0aW9uIChpdGVtLCBldmVudCkge1xuICAgICAgICAvLyBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgJHNjb3BlLnBvcnRmb2xpb19faW1nX19jbGFzcyA9ICcnO1xuXG5cbiAgICB9O1xuXG4gICAgJHNjb3BlLnBvcnRmb2xpb1Nob3dQb3B1cCA9IGZ1bmN0aW9uIChpdGVtLCBldmVudCkge1xuXG4gICAgICAgIHZhciBzZWxlY3RvciA9ICcjaW1nLScgKyBpdGVtLmlkO1xuXG4gICAgICAgIHZhciB0YXJnZXQgPSBhbmd1bGFyLmVsZW1lbnQgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgKHNlbGVjdG9yKSk7XG4gICAgICAgIHZhciB0b3AgPSB0YXJnZXRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICgpLnRvcDtcbiAgICAgICAgdmFyIGxlZnQgPSB0YXJnZXRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICgpLmxlZnQ7XG4gICAgICAgIHZhciByaWdodCA9IHRhcmdldFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgKCkucmlnaHQ7XG4gICAgICAgIHZhciBib3R0b20gPSB0YXJnZXRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICgpLmJvdHRvbTtcbiAgICAgICAgdmFyIG1pZGRsZVRvcCA9IChcbiAgICAgICAgICAgICAgICB0b3AgKyAoXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbSAtIHRvcFxuICAgICAgICAgICAgICAgICkgLyAyXG4gICAgICAgICAgICApIC0gMTA7XG4gICAgICAgIHZhciBtaWRkbGVTaWRlID0gKFxuICAgICAgICAgICAgICAgIGxlZnQgKyAoXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0IC0gbGVmdFxuICAgICAgICAgICAgICAgICkgLyAyXG4gICAgICAgICAgICApIC0gNTA7XG4gICAgICAgIHRhcmdldC50ZXh0IChpdGVtKTtcblxuICAgICAgICAkc2NvcGUucG9ydGZvbGlvX19pbWdfX2NhdGVnb3J5ID0gaXRlbS5jYXRlZ29yeTtcbiAgICAgICAgJHNjb3BlLnBvcnRmb2xpb19faW1nX19jbGFzcyA9ICdtb3VzZU92ZXInO1xuICAgICAgICAkc2NvcGUubXlTdHlsZSA9IHsndG9wJzogbWlkZGxlVG9wICsgJ3B4JywgJ2xlZnQnOiBtaWRkbGVTaWRlICsgJ3B4J307XG5cbiAgICB9O1xuXG5cbiAgICAvLz09PT09PT09PT09PT09PSBhY2hpZXZlbWVudHMgPT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAkc2NvcGUuYWNoaWV2ZW1lbnRzSXRlbXMgPSBNYWluU2VydmljZS5nZXRBY2hpZXZlbWVudHMgKCk7XG5cbiAgICAkc2NvcGUubGluZUluVmlldyA9IGZ1bmN0aW9uIChpbnZpZXcpIHtcblxuICAgICAgICAkc2NvcGUuYWNpZXZlbWVudFZhbHVlID0gWzAsIDAsIDAsIDBdO1xuXG4gICAgICAgIGlmIChpbnZpZXcpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCckc2NvcGUuaWFjaGlldmVtZW50c0l0ZW1zWzBdLnZhbHVlPScsJHNjb3BlLmFjaGlldmVtZW50c0l0ZW1zWzBdLnZhbHVlKTtcbiAgICAgICAgICAgICRzY29wZS5teUludGV2YWwgPSAkaW50ZXJ2YWwgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFjaWV2ZW1lbnRWYWx1ZVswXSA8ICRzY29wZS5hY2hpZXZlbWVudHNJdGVtc1swXS52YWx1ZSkgeyRzY29wZS5hY2lldmVtZW50VmFsdWVbMF0gKz0gNjt9IGVsc2UgaWYgKCRzY29wZS5hY2lldmVtZW50VmFsdWVbMF0gPj0gJHNjb3BlLmFjaGlldmVtZW50c0l0ZW1zWzBdLnZhbHVlKSB7JHNjb3BlLmFjaWV2ZW1lbnRWYWx1ZVswXSA9ICRzY29wZS5hY2hpZXZlbWVudHNJdGVtc1swXS52YWx1ZTt9XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hY2lldmVtZW50VmFsdWVbMV0gPCAkc2NvcGUuYWNoaWV2ZW1lbnRzSXRlbXNbMV0udmFsdWUpIHskc2NvcGUuYWNpZXZlbWVudFZhbHVlWzFdICs9IDEyMTY3O30gZWxzZSBpZiAoJHNjb3BlLmFjaWV2ZW1lbnRWYWx1ZVsxXSA+PSAkc2NvcGUuYWNoaWV2ZW1lbnRzSXRlbXNbMV0udmFsdWUpIHskc2NvcGUuYWNpZXZlbWVudFZhbHVlWzFdID0gJHNjb3BlLmFjaGlldmVtZW50c0l0ZW1zWzFdLnZhbHVlO31cbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFjaWV2ZW1lbnRWYWx1ZVsyXSA8ICRzY29wZS5hY2hpZXZlbWVudHNJdGVtc1syXS52YWx1ZSkgeyRzY29wZS5hY2lldmVtZW50VmFsdWVbMl0gKz0gNzt9IGVsc2UgaWYgKCRzY29wZS5hY2lldmVtZW50VmFsdWVbMl0gPj0gJHNjb3BlLmFjaGlldmVtZW50c0l0ZW1zWzJdLnZhbHVlKSB7JHNjb3BlLmFjaWV2ZW1lbnRWYWx1ZVsyXSA9ICRzY29wZS5hY2hpZXZlbWVudHNJdGVtc1syXS52YWx1ZTt9XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hY2lldmVtZW50VmFsdWVbM10gPCAkc2NvcGUuYWNoaWV2ZW1lbnRzSXRlbXNbM10udmFsdWUpIHskc2NvcGUuYWNpZXZlbWVudFZhbHVlWzNdICs9IDI7fSBlbHNlIGlmICgkc2NvcGUuYWNpZXZlbWVudFZhbHVlWzNdID49ICRzY29wZS5hY2hpZXZlbWVudHNJdGVtc1szXS52YWx1ZSkgeyRzY29wZS5hY2lldmVtZW50VmFsdWVbM10gPSAkc2NvcGUuYWNoaWV2ZW1lbnRzSXRlbXNbM10udmFsdWU7fVxuXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hY2lldmVtZW50VmFsdWVbMl0gPT0gJHNjb3BlLmFjaGlldmVtZW50c0l0ZW1zWzJdLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCckaW50ZXJ2YWwgaGFzIHN0b3BwZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbCAoJHNjb3BlLm15SW50ZXZhbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LCAyKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbCAoJHNjb3BlLm15SW50ZXZhbCk7XG4gICAgICAgICAgICAkc2NvcGUuYWNpZXZlbWVudFZhbHVlID0gWzAsIDAsIDAsIDBdO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT0gYWJvdXQgPT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAkc2NvcGUuYmxvY2tIZWFkZXJJdGVtcyA9IE1haW5TZXJ2aWNlLmdldEhlYWRlckl0ZW1zICgpO1xuICAgICRzY29wZS50ZWFtTWVtYmVycyA9IE1haW5TZXJ2aWNlLmdldFRlYW1NZW1iZXJzICgpO1xuICAgICRzY29wZS5zb2NpYWxJY29ucyA9IE1haW5TZXJ2aWNlLmdldFNvY2lhbEljb25zICgpO1xuXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT0gbmV3cyA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gICAgTWFpblNlcnZpY2UuZ2V0TmV3cyAoKS50aGVuIChmdW5jdGlvbihyZXN1bHQpIHtcblxuXG4gICAgICAgICRzY29wZS5uZXdzID0gcmVzdWx0O1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuXG4gICAgICAgIGNvbnNvbGUubG9nIChcIkVycm9yOiBcIiwgZXJyKTtcbiAgICB9KTtcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0gY29udGFjdHMgPT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAkc2NvcGUubmFtZVJlZ0V4ID0gLyguKlthLXpdKXszLH0vaTtcbiAgICAkc2NvcGUuZW1haWxSZWdFeCA9IC9eW2EtekEtWjAtOS5fXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLDZ9JC87XG4gICAgJHNjb3BlLm1lc3NhZ2VSZWdFeCA9IC8oLipbYS16MC05Ll9dKXsyMCx9L2k7XG4gICAgJHNjb3BlLmNvbnRhY3ROYW1lSW5wdXRWYWxpZENsYXNzID0gJ3NsaWRldXAnO1xuICAgICRzY29wZS5jb250YWN0RW1haWxJbnB1dFZhbGlkQ2xhc3MgPSAnc2xpZGV1cCc7XG4gICAgJHNjb3BlLmNvbnRhY3RNZXNzYWdlSW5wdXRWYWxpZENsYXNzID0gJ3NsaWRldXAnO1xuXG5cbiAgICAkc2NvcGUuY29udGFjdHMgPSB7XG4gICAgICAgIHVzZXJOYW1lOiBcIlwiLFxuICAgICAgICB1c2VyRW1haWw6IFwiXCIsXG4gICAgICAgIHVzZXJNZXNzYWdlOiBcIlwiXG4gICAgfTtcblxuXG4gICAgLy8gJHNjb3BlLnBhc3N3b3JkUmVnRXggPSAvW2EtekEtWjAtOV17Nix9LztcblxuXG4gICAgJHNjb3BlLm5hbWVWYWxpZGF0aW9uID0gZnVuY3Rpb24gKGlzTmFtZVZhbGlkZSkge1xuXG4gICAgICAgICRzY29wZS5jb250YWN0TmFtZUlucHV0VmFsaWRDbGFzcyA9ICBpc05hbWVWYWxpZGUgPyAnc2xpZGVkb3duJzonc2xpZGV1cCc7XG4gICAgfTtcblxuXG4gICAgJHNjb3BlLmVtYWlsVmFsaWRhdGlvbiA9IGZ1bmN0aW9uIChpc0VtYWlsVmFsaWRlKSB7XG5cbiAgICAgICAgJHNjb3BlLmNvbnRhY3RFbWFpbElucHV0VmFsaWRDbGFzcyA9ICBpc0VtYWlsVmFsaWRlID8gJ3NsaWRlZG93bic6J3NsaWRldXAnO1xuICAgIH07XG5cbiAgICAkc2NvcGUubWVzc2FnZVZhbGlkYXRpb24gPSBmdW5jdGlvbiAoaXNNZXNzYWdlVmFsaWRlKSB7XG5cbiAgICAgICAgJHNjb3BlLmNvbnRhY3RNZXNzYWdlSW5wdXRWYWxpZENsYXNzID0gIGlzTWVzc2FnZVZhbGlkZSA/ICdzbGlkZWRvd24nOidzbGlkZXVwJztcbiAgICB9O1xuXG4gICAgJHNjb3BlLnN1Ym1pdENvbnRhY3RGb3JtID0gZnVuY3Rpb24gKGlzVmFsaWQpIHtcblxuICAgICAgICAvLyBpZiAoaXNWYWxpZCkge1xuICAgICAgICAvLyAgICAgJHNjb3BlLm1lc3NhZ2UgPSBcIldlIHNlbnQgbGluayB0byB5b3VyIGUtbWFpbC4gUGxlYXNlIGZvbGxvdyB0aGUgbGluayB0byBhY3RpdmF0ZSB5b3VyIGFjY291bnRcIjtcbiAgICAgICAgLy8gfVxuXG4gICAgfTtcblxufVxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHNlcmdpaWl2YW5jaGVua28gb24gMTkvMDkvMjAxNy5cbiAqL1xuXG5cbmZ1bmN0aW9uIGFjaGlldmVtZW50cyhwYXRoKSB7XG4gICAgdmFyIGRkbyA9IHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IHBhdGguYmFzZVBhdGggKyAnYXNzZXRzL3RlbXBsYXRlcy9hY2hpZXZlbWVudHMuaHRtbCdcbiAgICB9O1xuICAgIHJldHVybiBkZG87XG59XG5cbmZ1bmN0aW9uIGJsb2NrSGVhZGVyKHBhdGgpIHtcbiAgICB2YXIgZGRvID0ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJy4uL2Fzc2V0cy90ZW1wbGF0ZXMvYmxvY2staGVhZGVyLmh0bWwnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogcGF0aC5iYXNlUGF0aCArICdhc3NldHMvdGVtcGxhdGVzL2Jsb2NrLWhlYWRlci5odG1sJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICc9JyxcbiAgICAgICAgICAgIGgyQ29sb3I6ICdAJ1xuICAgICAgICB9LFxuICAgICAgICByZXBsYWNlOiB0cnVlXG4gICAgfTtcblxuICAgIHJldHVybiBkZG87XG59XG5cbmZ1bmN0aW9uIHRlYW1NZW1iZXJzKHBhdGgpIHtcbiAgICB2YXIgZGRvID0ge1xuICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAvLyB0ZW1wbGF0ZVVybDogJy4uL2Fzc2V0cy90ZW1wbGF0ZXMvdGVhbS1tZW1iZXJzLmh0bWwnXG4gICAgICAgIHRlbXBsYXRlVXJsOiBwYXRoLmJhc2VQYXRoICsgJ2Fzc2V0cy90ZW1wbGF0ZXMvdGVhbS1tZW1iZXJzLmh0bWwnXG4gICAgfTtcbiAgICByZXR1cm4gZGRvO1xufVxuXG5mdW5jdGlvbiBuZXdzQmxvY2socGF0aCkge1xuICAgIHZhciBkZG8gPSB7XG4gICAgICAgIC8vIHRlbXBsYXRlVXJsOiAnLi4vYXNzZXRzL3RlbXBsYXRlcy9uZXdzLWJsb2NrLmh0bWwnXG4gICAgICAgIHRlbXBsYXRlVXJsOiBwYXRoLmJhc2VQYXRoICsgJ2Fzc2V0cy90ZW1wbGF0ZXMvbmV3cy1ibG9jay5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRkbztcbn1cblxuZnVuY3Rpb24gY29udGFjdEZvcm0ocGF0aCkge1xuICAgIHZhciBkZG8gPSB7XG4gICAgICAgIC8vIHRlbXBsYXRlVXJsOicuLi9hc3NldHMvdGVtcGxhdGVzL2NvbnRhY3QtZm9ybS5odG1sJ1xuICAgICAgICB0ZW1wbGF0ZVVybDogcGF0aC5iYXNlUGF0aCArICdhc3NldHMvdGVtcGxhdGVzL2NvbnRhY3QtZm9ybS5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRkbztcbn1cblxuZnVuY3Rpb24gaGVhZGVyQmxvY2socGF0aCkge1xuICAgIHZhciBkZG8gPSB7XG4gICAgICAgIC8vIHRlbXBsYXRlVXJsOicuLi9hc3NldHMvdGVtcGxhdGVzL2NvbnRhY3QtZm9ybS5odG1sJ1xuICAgICAgICB0ZW1wbGF0ZVVybDogcGF0aC5iYXNlUGF0aCArICdhc3NldHMvdGVtcGxhdGVzL2hlYWRlci1ibG9jay5odG1sJ1xuICAgIH07XG4gICAgcmV0dXJuIGRkbztcblxufSIsIi8qKlxuICogQ3JlYXRlZCBieSBzZXJnaWlpdmFuY2hlbmtvIG9uIDE5LzA5LzIwMTcuXG4gKi9cbk1haW5TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2NhdGlvbicsICdwYXRoJ107XG5mdW5jdGlvbiBNYWluU2VydmljZSgkaHR0cCwgJGxvY2F0aW9uLCBwYXRoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB0aGlzO1xuXG5cbiAgICB2YXIgc29jaWFsSWNvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdmYWNlYm9vaycsXG4gICAgICAgICAgICBzcmM6IHBhdGguYmFzZVBhdGggKyAnYXNzZXRzL2ltYWdlcy9pY29ucy9mYWNlYm9vay5wbmcnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdnb29nbGUnLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgJ2Fzc2V0cy9pbWFnZXMvaWNvbnMvZ29vZ2xlLnBuZydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3R3ZWV0ZXInLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgJ2Fzc2V0cy9pbWFnZXMvaWNvbnMvdHdlZXRlci5wbmcnXG4gICAgICAgIH0sXG4gICAgICAgIHtcblxuICAgICAgICAgICAgbmFtZTogJ2RyaWJibGUnLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgJ2Fzc2V0cy9pbWFnZXMvaWNvbnMvZHJpYmJsZS5wbmcnXG4gICAgICAgIH0sXG5cbiAgICBdO1xuXG4gICAgdmFyIHRlYW1NZW1iZXJzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIG5hbWU6ICdKb2huIERvZScsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ0dyYXBoaWMgZGVzaWduZXInLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaW5jaWR1bnQuIENyYXMgZGFwaWJ1cy4gQWVuZWFuIGxlbyBsaWd1bGEnLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgJ2Fzc2V0cy9pbWFnZXMvbW9iaWxlL21lbWJlcjEuanBlZydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDIsXG4gICAgICAgICAgICBuYW1lOiAnU2FyYWggTC4gSGl0eicsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ0Zyb250ZW5kIGRldmVsb3BlcicsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ01vbnRlcywgbmFzY2V0dXIgcmlkaWN1bHVzIG11cy4gcGVsbGVudGVzcXVlIGV1JyxcbiAgICAgICAgICAgIHNyYzogcGF0aC5iYXNlUGF0aCArICdhc3NldHMvaW1hZ2VzL21vYmlsZS9tZW1iZXIyLmpwZWcnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAzLFxuICAgICAgICAgICAgbmFtZTogJ0RhbGUgUC4gUGl0Y2hmb3JkJyxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnRnJvbnRlbmQgZGV2ZWxvcGVyJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTnVsbGFtIGRpY3R1bSBmZWxpcyBldSBwZWRlIG1vbGxpcyBwcmV0aXVtLicsXG4gICAgICAgICAgICBzcmM6IHBhdGguYmFzZVBhdGggKyAnYXNzZXRzL2ltYWdlcy9tb2JpbGUvbWVtYmVyMy5qcGVnJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogNCxcbiAgICAgICAgICAgIG5hbWU6ICdQcm92aWNpYSBOb3J0b24nLFxuICAgICAgICAgICAgcG9zaXRpb246ICdCYWNrZW5kIGRldmVsb3BlcicsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xpYmVybyB2ZW5lbmF0aXMgZmF1Y2lidXMuIEV0aWFtIHNpdCBhbWV0IGVyb3MgZmF1Y2lidXMnLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgJ2Fzc2V0cy9pbWFnZXMvbW9iaWxlL21lbWJlcjQuanBlZydcbiAgICAgICAgfSxcbiAgICBdO1xuXG5cbiAgICB2YXIgYWNoaWV2ZW1lbnRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIHNyYzogcGF0aC5iYXNlUGF0aCArICdhc3NldHMvaW1hZ2VzL2ljb25zL2FjaGlldmVtZW50MTEucG5nJyxcbiAgICAgICAgICAgIHZhbHVlOiAzMDU0LFxuICAgICAgICAgICAgbmFtZTogJ2NvbXBsZXRlZCBwcm9kdWN0cydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDIsXG4gICAgICAgICAgICBzcmM6IHBhdGguYmFzZVBhdGggKyAnYXNzZXRzL2ltYWdlcy9pY29ucy9hY2hpZXZlbWVudDIxLnBuZycsXG4gICAgICAgICAgICB2YWx1ZTogNzIzNDg3MyxcbiAgICAgICAgICAgIG5hbWU6ICdjbGljayBwcmVzc2VkJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogMyxcbiAgICAgICAgICAgIHNyYzogcGF0aC5iYXNlUGF0aCArICdhc3NldHMvaW1hZ2VzL2ljb25zL2FjaGlldmVtZW50MzEucG5nJyxcbiAgICAgICAgICAgIHZhbHVlOiA0NjcwLFxuICAgICAgICAgICAgbmFtZTogJ21haWxzIHNlbnQgJiByZWNlaXZlZCdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDQsXG4gICAgICAgICAgICBzcmM6IHBhdGguYmFzZVBhdGggKyAnYXNzZXRzL2ltYWdlcy9pY29ucy9hY2hpZXZlbWVudDQxLnBuZycsXG4gICAgICAgICAgICB2YWx1ZTogOTM5LFxuICAgICAgICAgICAgbmFtZTogJ2pva2VzIHRvbGRzJ1xuICAgICAgICB9LFxuICAgIF07XG5cbiAgICB2YXIgcG9ydGZvbGlvSW1hZ2VzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJzEnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwid2ViIGRlc2lnblwiLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgXCJhc3NldHMvaW1hZ2VzL21vYmlsZS9wb3J0Zm9saW9faW1nLzEuanBlZ1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGlkOiAnMicsXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJ3ZWIgZGVzaWduXCIsXG4gICAgICAgICAgICBzcmM6IHBhdGguYmFzZVBhdGggKyBcImFzc2V0cy9pbWFnZXMvbW9iaWxlL3BvcnRmb2xpb19pbWcvMi5qcGVnXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICczJyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcIndlYiBkZXNpZ25cIixcbiAgICAgICAgICAgIHNyYzogcGF0aC5iYXNlUGF0aCArIFwiYXNzZXRzL2ltYWdlcy9tb2JpbGUvcG9ydGZvbGlvX2ltZy8zLmpwZWdcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJzQnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwid2ViIGRlc2lnblwiLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgXCJhc3NldHMvaW1hZ2VzL21vYmlsZS9wb3J0Zm9saW9faW1nLzQuanBlZ1wiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnNScsXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJwaG90b2dyYXBoeVwiLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgXCJhc3NldHMvaW1hZ2VzL21vYmlsZS9wb3J0Zm9saW9faW1nLzUuanBlZ1wiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnNicsXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJwaG90b2dyYXBoeVwiLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgXCJhc3NldHMvaW1hZ2VzL21vYmlsZS9wb3J0Zm9saW9faW1nLzYuanBlZ1wiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnNycsXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJwaG90b2dyYXBoeVwiLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgXCJhc3NldHMvaW1hZ2VzL21vYmlsZS9wb3J0Zm9saW9faW1nLzcuanBlZ1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGlkOiAnOCcsXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJwaG90b2dyYXBoeVwiLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgXCJhc3NldHMvaW1hZ2VzL21vYmlsZS9wb3J0Zm9saW9faW1nLzguanBlZ1wiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnOScsXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJncmFwaGljXCIsXG4gICAgICAgICAgICBzcmM6IHBhdGguYmFzZVBhdGggKyBcImFzc2V0cy9pbWFnZXMvbW9iaWxlL3BvcnRmb2xpb19pbWcvOS5qcGVnXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICcxMCcsXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJncmFwaGljXCIsXG4gICAgICAgICAgICBzcmM6IHBhdGguYmFzZVBhdGggKyBcImFzc2V0cy9pbWFnZXMvbW9iaWxlL3BvcnRmb2xpb19pbWcvMTAuanBlZ1wiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnMTEnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwiZ3JhcGhpY1wiLFxuICAgICAgICAgICAgc3JjOiBwYXRoLmJhc2VQYXRoICsgXCJhc3NldHMvaW1hZ2VzL21vYmlsZS9wb3J0Zm9saW9faW1nLzExLmpwZWdcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJzEyJyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcImdyYXBoaWNcIixcbiAgICAgICAgICAgIHNyYzogcGF0aC5iYXNlUGF0aCArIFwiYXNzZXRzL2ltYWdlcy9tb2JpbGUvcG9ydGZvbGlvX2ltZy8xMi5qcGVnXCJcbiAgICAgICAgfSxcblxuICAgIF07XG5cblxuICAgIHZhciBibG9ja0hlYWRlckl0ZW1zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBoZWFkZXI6ICdPdXIgUG9ydGZvbGlvJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnaWQsIGxvcmVtLiBNYWVjZW5hcyBuZWMgb2RpbyBldCBhbnRlIHRpbmNpZHVudCB0ZW1wdXMuIERvbmVjIHZpdGFlIHNhcGllbiB1dCBsaWJlcm8gdmVuZW5hdGlzIGZhdWNpYnVzLiBOdWxsYW0gcXVpcyBhbnRlLiBFdGlhbSBzaXQgYW1ldCBvcmNpIGVnZXQgZXJvc2ZhdWNpYnVzJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBoZWFkZXI6ICdXZSBhcmUgdGhlIG9uZScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ01hZWNlbmFzIG5lYyBvZGlvIGV0IGFudGUgdGluY2lkdW50IHRlbXB1cy4gRG9uZWMgdml0YWUgc2FwaWVuIHV0IGxpYmVybyB2ZW5lbmF0aXMgZmF1Y2lidXMuIE51bGxhbSBxdWlzIGFudGUuIEV0aWFtIHNpdCBhbWV0IG9yY2kgZWdldCBlcm9zZmF1Y2lidXMnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGhlYWRlcjogJ0NoZWNrIG91dCBuZXdzJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRG9uZWMgdml0YWUgc2FwaWVuIHV0IGxpYmVybyB2ZW5lbmF0aXMgZmF1Y2lidXMuIE1hZWNlbmFzIG5lYyBvZGlvIGV0IGFudGUgdGluY2lkdW50IHRlbXB1cy4gIE51bGxhbSBxdWlzIGFudGUuIEV0aWFtIHNpdCBhbWV0IG9yY2kgZWdldCBlcm9zZmF1Y2lidXMnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGhlYWRlcjogJ0NvbnRhY3QgVXMnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdsaWJlcm8gdmVuZW5hdGlzIGZhdWNpYnVzIGRvbmVjIHZpdGFlIHNhcGllbi4gTWFlY2VuYXMgbmVjIG9kaW8gZXQgYW50ZSB0aW5jaWR1bnQgdGVtcHVzLiAgTnVsbGFtIHF1aXMgYW50ZS4gRXRpYW0gc2l0IGFtZXQgb3JjaSBlZ2V0IGVyb3NmYXVjaWJ1cydcbiAgICAgICAgfVxuICAgIF07XG5cblxuICAgIHNlcnZpY2UuZ2V0SW1hZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcG9ydGZvbGlvSW1hZ2VzO1xuICAgIH07XG5cbiAgICBzZXJ2aWNlLmdldEFjaGlldmVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFjaGlldmVtZW50cztcbiAgICB9O1xuXG4gICAgc2VydmljZS5nZXRUZWFtTWVtYmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRlYW1NZW1iZXJzO1xuICAgIH07XG5cbiAgICBzZXJ2aWNlLmdldEhlYWRlckl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYmxvY2tIZWFkZXJJdGVtcztcbiAgICB9O1xuXG4gICAgc2VydmljZS5nZXRTb2NpYWxJY29ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNvY2lhbEljb25zO1xuICAgIH07XG5cbiAgICBzZXJ2aWNlLmdldE5ld3MgPSBmdW5jdGlvbiAoKSB7XG5cblxuICAgICAgICAvLyB2YXIgdXJsID0gJy4uL2Fzc2V0cy9kYXRhL2RhdGEuanNvbic7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdsb2NhdGlvbi5wYXRoPScsJGxvY2F0aW9uLnBhdGgoKSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdsb2NhdGlvbi51cmw9JywkbG9jYXRpb24udXJsKCkpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnbG9jYXRpb24uaG9zdD0nLCRsb2NhdGlvbi5ob3N0KCkpO1xuXG4gICAgICAgIC8vIHZhciB1cmwgPSAnLi4vYXNzZXRzL2RhdGEvZGF0YS5qc29uJztcbiAgICAgICAgdmFyIHVybCA9IHBhdGguYmFzZVBhdGggKyAnYXNzZXRzL2RhdGEvZGF0YS5qc29uJztcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3VybD0nLHVybCk7XG5cbiAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBhcHBlbmRUcmFuc2Zvcm0gKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhbmdlRGF0ZSAodmFsdWUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHZhciBjaGFuZ2VEYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyAoJ3ZhbHVlPScsIHZhbHVlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YWx1ZVtpXS5uZXdEYXRlID0gbmV3IERhdGUgKHZhbHVlW2ldLmRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgZnVuY3Rpb24gYXBwZW5kVHJhbnNmb3JtKGRlZmF1bHRzLCB0cmFuc2Zvcm0pIHtcblxuICAgICAgICAgICAgLy8gV2UgY2FuJ3QgZ3VhcmFudGVlIHRoYXQgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb24gaXMgYW4gYXJyYXlcbiAgICAgICAgICAgIGRlZmF1bHRzID0gYW5ndWxhci5pc0FycmF5IChkZWZhdWx0cykgPyBkZWZhdWx0cyA6IFtkZWZhdWx0c107XG5cbiAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgbmV3IHRyYW5zZm9ybWF0aW9uIHRvIHRoZSBkZWZhdWx0c1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRzLmNvbmNhdCAodHJhbnNmb3JtKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgcmV0dXJuICRodHRwLmdldCAodXJsLCBjb25maWcpLnRoZW4gKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgLy8gXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyAoJ1ByaW1hcnkgcmVzdWx0PSAnLCByZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuXG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICAvLyBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nICgnRVJST1Igb24gaHR0cDonLCBlcnIpO1xuICAgICAgICB9KTtcblxuICAgIH07XG5cblxufSJdfQ==
